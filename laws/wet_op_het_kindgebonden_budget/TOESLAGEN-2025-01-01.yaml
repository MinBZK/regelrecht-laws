$id: https://raw.githubusercontent.com/MinBZK/poc-machine-law/refs/heads/main/schema/v0.1.6/schema.json
uuid: 5d8e4b3a-6f9c-4a2d-8e7b-1c9f2a5b8d3e
name: Kindgebonden Budget
law: wet_op_het_kindgebonden_budget
law_type: "FORMELE_WET"
legal_character: "BESCHIKKING"
decision_type: "TOEKENNING"
discoverable: "CITIZEN"
valid_from: 2025-01-01
service: "TOESLAGEN"
description: >
  Berekeningsregels voor het bepalen van het recht op en de hoogte van het kindgebonden budget
  volgens de Wet op het kindgebonden budget. Het kindgebonden budget is een bijdrage in de kosten
  voor kinderen tot 18 jaar. Het basisbedrag is €2.511 per kind, met extra bedragen voor oudere
  kinderen (€703 voor 12-15 jaar, €936 voor 16-17 jaar). Alleenstaande ouders zonder partner
  krijgen een extra verhoging van €3.389 (ALO-kop). De hoogte wordt inkomensafhankelijk afgebouwd.

legal_basis:
  law: "Wet op het kindgebonden budget"
  bwb_id: "BWBR0022751"
  article: "2"
  url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01"
  juriconnect: "jci1.3:c:BWBR0022751&z=2025-01-01&g=2025-01-01"
  explanation: "De Wet op het kindgebonden budget regelt de bijdrage in de kosten voor kinderen"

references:
  - law: "Wet op het kindgebonden budget"
    article: "2"
    url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
  - law: "Wet op het kindgebonden budget"
    article: "3"
    url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel3"

properties:
  parameters:
    - name: "BSN"
      description: "BSN van de ouder"
      type: "string"
      required: true
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 bepaalt dat kindgebonden budget wordt toegekend aan de ouder"

  input:
    - name: "HEEFT_PARTNER"
      description: "Heeft een partner (toeslagpartner)"
      type: "boolean"
      service_reference:
        service: "RvIG"
        field: "heeft_partner"
        law: "wet_brp"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "6"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 6 bepaalt dat alleenstaande ouders zonder partner recht hebben op een verhoging"

    - name: "PARTNER_BSN"
      description: "BSN van de partner (indien aanwezig)"
      type: "string"
      service_reference:
        service: "RvIG"
        field: "partner_bsn"
        law: "wet_brp"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "6"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
        explanation: "Partner BSN nodig voor gezamenlijk toetsingsinkomen en vermogen"

    - name: "AANTAL_KINDEREN"
      description: "Aantal kinderen waarvoor kinderbijslag wordt ontvangen"
      type: "number"
      service_reference:
        service: "SVB"
        field: "aantal_kinderen"
        law: "algemene_kinderbijslagwet"
      type_spec:
        precision: 0
        min: 0
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=1&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 1 bepaalt dat kindgebonden budget wordt berekend per kind"

    - name: "KINDEREN_LEEFTIJDEN"
      description: "Leeftijden van alle kinderen"
      type: "array"
      service_reference:
        service: "SVB"
        field: "kinderen_leeftijden"
        law: "algemene_kinderbijslagwet"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "4"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=4&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 4 bepaalt extra bedragen afhankelijk van leeftijd kinderen"

    - name: "ONTVANGT_KINDERBIJSLAG"
      description: "Ontvangt kinderbijslag voor het kind"
      type: "boolean"
      service_reference:
        service: "SVB"
        field: "ontvangt_kinderbijslag"
        law: "algemene_kinderbijslagwet"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=1&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 1 bepaalt dat ouder kinderbijslag moet ontvangen"

    - name: "TOETSINGSINKOMEN"
      description: "Toetsingsinkomen van de ouder"
      type: "amount"
      service_reference:
        service: "UWV"
        field: "toetsingsinkomen"
        law: "uwv_toetsingsinkomen"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "period"
        period_type: "year"
        immutable_after: "P2Y"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "5"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=5&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 5 bepaalt dat het budget wordt verminderd op basis van toetsingsinkomen"

    - name: "PARTNER_TOETSINGSINKOMEN"
      description: "Toetsingsinkomen van de partner"
      type: "amount"
      service_reference:
        service: "UWV"
        field: "toetsingsinkomen"
        law: "uwv_toetsingsinkomen"
        parameters:
          - name: "BSN"
            reference: "$PARTNER_BSN"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "period"
        period_type: "year"
        immutable_after: "P2Y"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "5"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=5&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 5 bepaalt dat gezamenlijk inkomen wordt gebruikt voor paren"

    - name: "VERMOGEN"
      description: "Vermogen van de ouder"
      type: "amount"
      service_reference:
        service: "BELASTINGDIENST"
        field: "vermogen"
        law: "belastingdienst_vermogen"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "point_in_time"
        reference: "$prev_january_first"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "3"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel3"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=3&lid=1&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 3 lid 1 stelt vermogensgrenzen vast voor recht op kindgebonden budget"

    - name: "PARTNER_VERMOGEN"
      description: "Vermogen van de partner"
      type: "amount"
      service_reference:
        service: "BELASTINGDIENST"
        field: "vermogen"
        law: "belastingdienst_vermogen"
        parameters:
          - name: "BSN"
            reference: "$PARTNER_BSN"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "point_in_time"
        reference: "$prev_january_first"
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "3"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel3"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=3&lid=1&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 3 lid 1 stelt vermogensgrenzen voor partners"

  output:
    - name: "heeft_recht_op_kindgebonden_budget"
      description: "Geeft aan of de ouder recht heeft op kindgebonden budget"
      type: "boolean"
      temporal:
        type: "period"
        period_type: "year"
      citizen_relevance: primary
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 bepaalt de voorwaarden voor recht op kindgebonden budget"

    - name: "kindgebonden_budget_jaar"
      description: "Totale hoogte van het kindgebonden budget per jaar"
      type: "amount"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "period"
        period_type: "year"
      citizen_relevance: primary
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 bepaalt de hoogte van het kindgebonden budget"

    - name: "alo_kop_bedrag"
      description: "Bedrag van de alleenstaande ouderkop (ALO-kop)"
      type: "amount"
      type_spec:
        unit: "eurocent"
        precision: 0
        min: 0
      temporal:
        type: "period"
        period_type: "year"
      citizen_relevance: secondary
      legal_basis:
        law: "Wet op het kindgebonden budget"
        bwb_id: "BWBR0022751"
        article: "2"
        paragraph: "6"
        url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
        juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
        explanation: "Artikel 2 lid 6 bepaalt de verhoging voor alleenstaande ouders"

  definitions:
    BASISBEDRAG_PER_KIND: 251100  # €2.511
    EXTRA_12_15_JAAR: 70300  # €703
    EXTRA_16_17_JAAR: 93600  # €936
    ALO_KOP: 348000  # €3.480 (2025 bedrag)
    DREMPELINKOMEN_ALLEENSTAAND: 2840600  # €28.406
    DREMPELINKOMEN_PARTNER: 4041600  # €40.416
    EXTRA_DREMPEL_PARTNER: 913900  # €9.139
    AFBOUWPERCENTAGE: 0.071  # 7.1%
    VERMOGENSGRENS_ALLEENSTAAND: 14189600  # €141.896
    VERMOGENSGRENS_PARTNER: 17942900  # €179.429

requirements:
  - all:
      # Kinderbijslag voorwaarde
      - subject: "$ONTVANGT_KINDERBIJSLAG"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Wet op het kindgebonden budget"
          bwb_id: "BWBR0022751"
          article: "2"
          paragraph: "1"
          url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
          juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=1&z=2025-01-01&g=2025-01-01"
          explanation: "Artikel 2 lid 1 vereist dat ouder kinderbijslag ontvangt"

      # Minimaal 1 kind
      - subject: "$AANTAL_KINDEREN"
        operation: GREATER_THAN
        value: 0
        legal_basis:
          law: "Wet op het kindgebonden budget"
          bwb_id: "BWBR0022751"
          article: "2"
          paragraph: "1"
          url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
          juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=1&z=2025-01-01&g=2025-01-01"
          explanation: "Artikel 2 lid 1 bepaalt dat kindgebonden budget geldt per kind"

      # Vermogenstoets
      - operation: IF
        legal_basis:
          law: "Wet op het kindgebonden budget"
          bwb_id: "BWBR0022751"
          article: "3"
          paragraph: "1"
          url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel3"
          juriconnect: "jci1.3:c:BWBR0022751&artikel=3&lid=1&z=2025-01-01&g=2025-01-01"
          explanation: "Artikel 3 lid 1 bepaalt de vermogensgrenzen"
        conditions:
          - test:
              subject: "$HEEFT_PARTNER"
              operation: EQUALS
              value: true
            then:
              operation: LESS_THAN
              values:
                - operation: ADD
                  values:
                    - "$VERMOGEN"
                    - "$PARTNER_VERMOGEN"
                - "$VERMOGENSGRENS_PARTNER"
          - else:
              operation: LESS_THAN
              values:
                - "$VERMOGEN"
                - "$VERMOGENSGRENS_ALLEENSTAAND"

actions:
  - output: "leeftijdstoeslagen"
    description: "Totale leeftijdstoeslagen voor alle kinderen"
    operation: FOREACH
    combine: ADD
    subject: "$KINDEREN_LEEFTIJDEN"
    as: "leeftijd"
    value:
      - operation: IF
        conditions:
          - test:
              operation: GREATER_OR_EQUAL
              values:
                - "$leeftijd"
                - 16
            then:
              operation: IF
              conditions:
                - test:
                    operation: LESS_OR_EQUAL
                    values:
                      - "$leeftijd"
                      - 17
                  then: "$EXTRA_16_17_JAAR"
                - else: 0
          - test:
              operation: GREATER_OR_EQUAL
              values:
                - "$leeftijd"
                - 12
            then:
              operation: IF
              conditions:
                - test:
                    operation: LESS_OR_EQUAL
                    values:
                      - "$leeftijd"
                      - 15
                  then: "$EXTRA_12_15_JAAR"
                - else: 0
          - else: 0

  - output: "alo_kop_bedrag"
    operation: IF
    legal_basis:
      law: "Wet op het kindgebonden budget"
      bwb_id: "BWBR0022751"
      article: "2"
      paragraph: "6"
      url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
      juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
      explanation: "Artikel 2 lid 6 bepaalt dat alleenstaande ouders zonder partner recht hebben op verhoging van €3.480"
    conditions:
      - test:
          subject: "$HEEFT_PARTNER"
          operation: EQUALS
          value: false
        then: "$ALO_KOP"
      - else: 0

  - output: "heeft_partner"
    value: "$HEEFT_PARTNER"
    legal_basis:
      law: "Wet op het kindgebonden budget"
      bwb_id: "BWBR0022751"
      article: "2"
      paragraph: "6"
      url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
      juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
      explanation: "Partnerstatus bepaalt of ALO-kop van toepassing is"

  - output: "kindgebonden_budget_jaar"
    operation: IF
    legal_basis:
      law: "Wet op het kindgebonden budget"
      bwb_id: "BWBR0022751"
      article: "2"
      url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
      juriconnect: "jci1.3:c:BWBR0022751&artikel=2&z=2025-01-01&g=2025-01-01"
      explanation: "Artikel 2 bepaalt berekening afhankelijk van partnerstatus en inkomen"
    conditions:
      # Alleenstaande ouder
      - test:
          subject: "$HEEFT_PARTNER"
          operation: EQUALS
          value: false
        legal_basis:
          law: "Wet op het kindgebonden budget"
          bwb_id: "BWBR0022751"
          article: "2"
          paragraph: "6"
          url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
          juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=6&z=2025-01-01&g=2025-01-01"
          explanation: "Artikel 2 lid 6 bepaalt de berekening voor alleenstaande ouders"
        then:
          operation: MAX
          values:
            - operation: SUBTRACT
              values:
                # Basisbedrag + leeftijdstoeslagen + ALO-kop
                - operation: ADD
                  values:
                    # Basisbedrag per kind
                    - operation: MULTIPLY
                      values:
                        - "$AANTAL_KINDEREN"
                        - "$BASISBEDRAG_PER_KIND"
                    # Leeftijdstoeslagen
                    - "$leeftijdstoeslagen"
                    # ALO-kop
                    - "$alo_kop_bedrag"
                # Afbouw op basis van inkomen boven drempel
                - operation: IF
                  conditions:
                    - test:
                        operation: GREATER_THAN
                        values:
                          - "$TOETSINGSINKOMEN"
                          - "$DREMPELINKOMEN_ALLEENSTAAND"
                      then:
                        operation: MULTIPLY
                        values:
                          - operation: SUBTRACT
                            values:
                              - "$TOETSINGSINKOMEN"
                              - "$DREMPELINKOMEN_ALLEENSTAAND"
                          - "$AFBOUWPERCENTAGE"
                    - else: 0
            - 0

      # Met partner
      - test:
          subject: "$HEEFT_PARTNER"
          operation: EQUALS
          value: true
        legal_basis:
          law: "Wet op het kindgebonden budget"
          bwb_id: "BWBR0022751"
          article: "2"
          paragraph: "5"
          url: "https://wetten.overheid.nl/BWBR0022751/2025-01-01#Artikel2"
          juriconnect: "jci1.3:c:BWBR0022751&artikel=2&lid=5&z=2025-01-01&g=2025-01-01"
          explanation: "Artikel 2 lid 5 bepaalt de berekening voor paren"
        then:
          operation: MAX
          values:
            - operation: SUBTRACT
              values:
                # Basisbedrag + leeftijdstoeslagen
                - operation: ADD
                  values:
                    - operation: MULTIPLY
                      values:
                        - "$AANTAL_KINDEREN"
                        - "$BASISBEDRAG_PER_KIND"
                    - "$leeftijdstoeslagen"
                # Afbouw op basis van gezamenlijk inkomen
                - operation: IF
                  conditions:
                    - test:
                        operation: GREATER_THAN
                        values:
                          - operation: ADD
                            values:
                              - "$TOETSINGSINKOMEN"
                              - "$PARTNER_TOETSINGSINKOMEN"
                          - operation: ADD
                            values:
                              - "$DREMPELINKOMEN_PARTNER"
                              - "$EXTRA_DREMPEL_PARTNER"
                      then:
                        operation: MULTIPLY
                        values:
                          - operation: SUBTRACT
                            values:
                              - operation: ADD
                                values:
                                  - "$TOETSINGSINKOMEN"
                                  - "$PARTNER_TOETSINGSINKOMEN"
                              - operation: ADD
                                values:
                                  - "$DREMPELINKOMEN_PARTNER"
                                  - "$EXTRA_DREMPEL_PARTNER"
                          - "$AFBOUWPERCENTAGE"
                    - else: 0
            - 0
