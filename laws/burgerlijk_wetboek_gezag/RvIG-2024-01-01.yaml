$id: https://raw.githubusercontent.com/MinBZK/poc-machine-law/refs/heads/main/schema/v0.1.6/schema.json
uuid: a87bbb48-0bde-487a-af4d-3dc7f4a7c220
name: Bepalen vertegenwoordigingsbevoegdheid minderjarigen
law: burgerlijk_wetboek_gezag
law_type: "FORMELE_WET"
legal_character: "BESCHIKKING"
decision_type: "ANDERE_HANDELING"
valid_from: 2024-01-01
service: "RvIG"
discoverable: "DELEGATION_PROVIDER"
legal_basis:
  law: "Burgerlijk Wetboek Boek 1"
  bwb_id: "BWBR0002656"
  article: "245"
  paragraph: "1"
  url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
  juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&lid=1&z=2024-01-01&g=2024-01-01"
  explanation: >
    Artikel 1:245 lid 1 BW bepaalt dat minderjarigen onder gezag staan. Het gezag omvat
    de zorg en verantwoordelijkheid voor de persoon, het beheer van vermogen en de
    vertegenwoordiging in burgerlijke handelingen.
description: >
  Bepaalt of een natuurlijke persoon bevoegd is om namens een minderjarige te handelen
  op basis van artikel 1:245 BW (ouderlijk gezag) en artikel 1:295 e.v. BW (voogdij).
  Ouders met gezag zijn van rechtswege bevoegd hun minderjarige kind te vertegenwoordigen.
  Dit geldt ook voor voogden die door de rechter zijn benoemd. Art. 1:233 BW bepaalt
  dat minderjarigheid eindigt bij het bereiken van de 18-jarige leeftijd.

references:
  - law: "Burgerlijk Wetboek Boek 1"
    article: "233"
    url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel233"
  - law: "Burgerlijk Wetboek Boek 1"
    article: "234"
    url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel234"
  - law: "Burgerlijk Wetboek Boek 1"
    article: "245"
    url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
  - law: "Burgerlijk Wetboek Boek 1"
    article: "253b"
    url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Afdeling1_Artikel253b"
  - law: "Burgerlijk Wetboek Boek 1"
    article: "235"
    url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Afdeling2_Artikel235"

properties:
  parameters:
    - name: "BSN"
      description: "BSN van de persoon wiens gezagsbevoegdheden worden opgezocht"
      type: "string"
      required: true
      legal_basis:
        law: "Wet basisregistratie personen"
        bwb_id: "BWBR0033715"
        article: "2.9"
        url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
        juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
        explanation: "BSN identificeert personen en hun gezagsrelaties in de BRP"

  sources:
    - name: "GEZAG_RELATIES"
      description: "Gezagsrelaties uit de BRP gezagsregistratie"
      type: "array"
      legal_basis:
        law: "Wet basisregistratie personen"
        bwb_id: "BWBR0033715"
        article: "2.9"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
        juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&lid=1&z=2024-01-01&g=2024-01-01"
        explanation: >
          Art. 2.9 Wet BRP bepaalt dat gegevens over ouders en kinderen worden opgenomen,
          waaronder gezagsrelaties. Het gezagsregister is onderdeel van de BRP.
      temporal:
        type: "period"
        period_type: "continuous"
      source_reference:
        table: "gezag_relaties"
        fields: ["bsn_kind", "naam_kind", "geboortedatum_kind", "type_gezag", "datum_ingang", "datum_einde", "status", "heeft_handlichting"]
        select_on:
          - name: "bsn_gezagdrager"
            description: "BSN nummer van de gezagsdrager"
            type: "string"
            value: "$BSN"

  output:
    - name: "heeft_delegaties"
      description: "Of de persoon delegaties heeft (kan handelen namens minderjarigen)"
      type: "boolean"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "245"
        paragraph: "4"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
        juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&lid=4&z=2024-01-01&g=2024-01-01"
        explanation: >
          Art. 1:245 lid 4 BW: Het gezag over minderjarige kinderen van ongehuwde
          ouders wordt door een of beide ouders uitgeoefend.
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "subject_ids"
      description: "BSN nummers van minderjarigen waarvoor de persoon gezag heeft"
      type: "array"
      legal_basis:
        law: "Wet basisregistratie personen"
        bwb_id: "BWBR0033715"
        article: "2.9"
        url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
        juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
        explanation: "BSN nummers van minderjarigen uit gezagsregistratie in BRP"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "subject_names"
      description: "Namen van minderjarigen waarvoor de persoon gezag heeft"
      type: "array"
      legal_basis:
        law: "Wet basisregistratie personen"
        bwb_id: "BWBR0033715"
        article: "2.7"
        url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.7"
        juriconnect: "jci1.3:c:BWBR0033715&artikel=2.7&z=2024-01-01&g=2024-01-01"
        explanation: "Namen uit persoonsgegevens in BRP"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "subject_types"
      description: "Types van de subjecten (altijd CITIZEN voor minderjarigen)"
      type: "array"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "233"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel233"
        juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=233&z=2024-01-01&g=2024-01-01"
        explanation: "Minderjarigen zijn natuurlijke personen (CITIZEN), niet rechtspersonen"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "delegation_types"
      description: "Type gezag per kind (OUDERLIJK_GEZAG, VOOGDIJ, etc.)"
      type: "array"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "245"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
        juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&z=2024-01-01&g=2024-01-01"
        explanation: "Type gezagsrelatie uit BRP gezagsregistratie"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "permissions"
      description: "Rechten per kind (volledig bij geldig gezag, beperkt bij handlichting)"
      type: "array"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "245"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
        juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&lid=1&z=2024-01-01&g=2024-01-01"
        explanation: >
          Art. 1:245 lid 1 BW: Gezag omvat volledige vertegenwoordigingsbevoegdheid
          in burgerlijke handelingen. Art. 1:235 BW: bij handlichting heeft het kind
          zelf (beperkte) handelingsbevoegdheid, waardoor ouder beperkte rechten krijgt.
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "valid_from_dates"
      description: "Startdatum van elk gezag"
      type: "array"
      legal_basis:
        law: "Wet basisregistratie personen"
        bwb_id: "BWBR0033715"
        article: "2.9"
        url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
        juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
        explanation: "Ingangsdatum van gezagsregistratie in BRP"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

    - name: "valid_until_dates"
      description: "Einddatum van elk gezag (automatisch bij 18 jaar of bij beeindiging)"
      type: "array"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "233"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel233"
        juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=233&z=2024-01-01&g=2024-01-01"
        explanation: "Gezag eindigt van rechtswege bij het bereiken van de 18-jarige leeftijd"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"

  definitions:
    # Art. 1:245 BW: gezag over minderjarigen
    # Alleen deze gezagstypen geven vertegenwoordigingsbevoegdheid
    BEVOEGDE_GEZAG_TYPEN:
      - "OUDERLIJK_GEZAG"      # Art. 1:247 BW - ouder met gezag
      - "GEZAMENLIJK_GEZAG"    # Art. 1:253b BW - beide ouders met gezag
      - "VOOGDIJ"              # Art. 1:295 BW - benoemde voogd
      - "VOOGDIJ_INSTELLING"   # Art. 1:302 BW - gecertificeerde instelling

    # Art. 1:233 BW: minderjarigheid eindigt bij 18 jaar
    MEERDERJARIGHEID_LEEFTIJD: 18

    # Art. 1:245 BW: gezag geeft volledige vertegenwoordigingsbevoegdheid
    GEZAG_RECHTEN:
      - "LEZEN"
      - "CLAIMS_INDIENEN"
      - "BESLUITEN_ONTVANGEN"

    # Art. 1:235 BW: bij handlichting heeft ouder beperkte rechten
    BEPERKTE_GEZAG_RECHTEN:
      - "LEZEN"

requirements:
  - operation: EXISTS
    subject: "$GEZAG_RELATIES"
    legal_basis:
      law: "Wet basisregistratie personen"
      bwb_id: "BWBR0033715"
      article: "2.9"
      url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
      juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
      explanation: "Persoon moet als gezagsdrager zijn geregistreerd in de BRP"

actions:
  # Stap 1: Filter op bevoegde gezagstypen, actieve status, en minderjarigheid
  # Art. 1:233 BW: minderjarigen zijn personen onder 18 jaar
  # Art. 1:245 BW: alleen geldig gezag geeft vertegenwoordigingsbevoegdheid
  - output: "bevoegde_gezag_relaties"
    operation: FOREACH
    subject: "$GEZAG_RELATIES"
    where:
      operation: AND
      values:
        - operation: IN
          subject: "$current.type_gezag"
          values: "$BEVOEGDE_GEZAG_TYPEN"
        - operation: EQUALS
          subject: "$current.status"
          value: "ACTIEF"
        - operation: LESS_THAN
          values:
            - operation: SUBTRACT_DATE
              unit: "years"
              values:
                - "$calculation_date"
                - "$current.geboortedatum_kind"
            - "$MEERDERJARIGHEID_LEEFTIJD"
        # Check datum_einde is either null, empty, or in the future
        - operation: OR
          values:
            - operation: IS_NULL
              subject: "$current.datum_einde"
            - operation: EQUALS
              subject: "$current.datum_einde"
              value: ""
            - operation: GREATER_THAN
              values:
                - "$current.datum_einde"
                - "$calculation_date"
    value: "$current"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "245"
      paragraph: "1"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&lid=1&z=2024-01-01&g=2024-01-01"
      explanation: >
        Art. 1:245 lid 1 BW: alleen geldig gezag (ouderlijk gezag of voogdij) over
        minderjarigen geeft vertegenwoordigingsbevoegdheid. Art. 1:233 BW: minderjarigen
        zijn personen onder 18 jaar.

  # heeft_delegaties: boolean indicating if person has any delegations
  - output: "heeft_delegaties"
    operation: EXISTS
    subject: "$bevoegde_gezag_relaties"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "245"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&z=2024-01-01&g=2024-01-01"
      explanation: >
        Art. 1:245 BW bepaalt dat ouders/voogden met gezag de minderjarige
        vertegenwoordigen.

  # subject_ids: BSN numbers of minors
  - output: "subject_ids"
    subject: "$bevoegde_gezag_relaties.bsn_kind"
    legal_basis:
      law: "Wet basisregistratie personen"
      bwb_id: "BWBR0033715"
      article: "2.9"
      url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
      juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
      explanation: "BSN nummers van minderjarigen uit gezagsregistratie"

  # subject_names: names of minors
  - output: "subject_names"
    subject: "$bevoegde_gezag_relaties.naam_kind"
    legal_basis:
      law: "Wet basisregistratie personen"
      bwb_id: "BWBR0033715"
      article: "2.7"
      url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.7"
      juriconnect: "jci1.3:c:BWBR0033715&artikel=2.7&z=2024-01-01&g=2024-01-01"
      explanation: "Namen uit persoonsgegevens in BRP"

  # subject_types: constant "CITIZEN" for each minor
  - output: "subject_types"
    operation: FOREACH
    subject: "$bevoegde_gezag_relaties"
    value: "CITIZEN"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "233"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel233"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=233&z=2024-01-01&g=2024-01-01"
      explanation: "Minderjarigen zijn natuurlijke personen, altijd CITIZEN"

  # delegation_types: gezag type
  - output: "delegation_types"
    subject: "$bevoegde_gezag_relaties.type_gezag"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "245"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel14_Artikel245"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=245&z=2024-01-01&g=2024-01-01"
      explanation: "Type gezag uit BRP gezagsregistratie"

  # permissions: full permissions unless child has handlichting
  # Art. 1:235 BW: bij handlichting heeft kind zelf handelingsbevoegdheid
  - output: "permissions"
    operation: FOREACH
    subject: "$bevoegde_gezag_relaties"
    value:
      operation: IF
      conditions:
        - test:
            operation: EQUALS
            subject: "$current.heeft_handlichting"
            value: true
          then: "$BEPERKTE_GEZAG_RECHTEN"
        - else: "$GEZAG_RECHTEN"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "235"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Afdeling2_Artikel235"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=235&z=2024-01-01&g=2024-01-01"
      explanation: >
        Art. 1:235 BW: bij handlichting heeft de minderjarige zelf bepaalde
        handelingsbevoegdheden. De ouder/voogd heeft dan beperkte rechten voor
        die gebieden waar het kind zelf bevoegd is.

  # valid_from_dates: registration start date
  - output: "valid_from_dates"
    subject: "$bevoegde_gezag_relaties.datum_ingang"
    legal_basis:
      law: "Wet basisregistratie personen"
      bwb_id: "BWBR0033715"
      article: "2.9"
      url: "https://wetten.overheid.nl/BWBR0033715/2024-01-01#Hoofdstuk2_Paragraaf2.2_Artikel2.9"
      juriconnect: "jci1.3:c:BWBR0033715&artikel=2.9&z=2024-01-01&g=2024-01-01"
      explanation: "Ingangsdatum gezagsregistratie uit BRP"

  # valid_until_dates: explicit end date or null (age check already in filter)
  - output: "valid_until_dates"
    subject: "$bevoegde_gezag_relaties.datum_einde"
    legal_basis:
      law: "Burgerlijk Wetboek Boek 1"
      bwb_id: "BWBR0002656"
      article: "233"
      url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel13_Artikel233"
      juriconnect: "jci1.3:c:BWBR0002656&boek=1&artikel=233&z=2024-01-01&g=2024-01-01"
      explanation: "Einddatum gezag, of null als nog actief (leeftijdscheck al in filter)"
