$id: https://raw.githubusercontent.com/MinBZK/poc-machine-law/refs/heads/main/schema/v0.1.6/schema.json
uuid: 8a3f4b2c-7d1e-4f8a-9c3b-5e6d7f8a9b0c
name: Exploitatievergunning Horeca Rotterdam
law: algemene_plaatselijke_verordening/exploitatievergunning
law_type: "GEMEENTELIJKE_VERORDENING"
legal_character: "BESCHIKKING"
decision_type: "TOEKENNING"
discoverable: "BUSINESS"
requires_manual_approval: true
valid_from: 2024-01-01
service: "GEMEENTE_ROTTERDAM"
legal_basis:
  law: "Algemene plaatselijke verordening Rotterdam 2012"
  article: "2:28"
  url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
  explanation: "Artikel 2:28 van de APV Rotterdam 2012 regelt de exploitatievergunning voor openbare inrichtingen zoals horeca, hotels en uitgaansgelegenheden"
description: >
  Regels voor het verkrijgen van een exploitatievergunning voor openbare inrichtingen in Rotterdam.
  Een exploitatievergunning is vereist voor het exploiteren van horeca, hotels, uitgaansgelegenheden
  en andere publieke inrichtingen. De vergunning wordt verleend voor vijf jaar en stelt eisen aan
  de exploitant (leeftijd, goed gedrag, Bibob), beheerders/leidinggevenden, het pand (omgevingsplan,
  BAG-registratie) en de exploitatie (openingstijden, horecagebiedsplan).

references:
  - law: "Algemene plaatselijke verordening Rotterdam 2012"
    article: "2:28a"
    url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
    explanation: "Nadere regels exploitatievergunning"
  - law: "Algemene plaatselijke verordening Rotterdam 2012"
    article: "2:28b"
    url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
    explanation: "Horecagebiedsplannen"
  - law: "Algemene plaatselijke verordening Rotterdam 2012"
    article: "2:29"
    url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
    explanation: "Sluitingstijden"
  - law: "Horecanota Rotterdam 2023"
    article: "Geheel"
    url: "https://lokaleregelgeving.overheid.nl/CVDR717300/1"
    explanation: "Beleidskader voor horeca in Rotterdam"
  - law: "Wet bevordering integriteitsbeoordelingen door het openbaar bestuur"
    bwb_id: "BWBR0013798"
    article: "3"
    url: "https://wetten.overheid.nl/BWBR0013798/2024-01-01#Paragraaf2_Artikel3"
    explanation: "Bibob-toets is verplicht bij horecavergunningen"
  - law: "Alcoholwet"
    bwb_id: "BWBR0002458"
    article: "8"
    url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Hoofdstuk2_Artikel8"
    explanation: "Eisen sociale hygiëne (SVH diploma) voor leidinggevenden"

properties:
  parameters:
    - name: "KVK_NUMMER"
      description: "KVK-nummer van de onderneming"
      type: "string"
      required: true
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "1"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Het KVK-nummer is nodig voor identificatie van de onderneming die de exploitatievergunning aanvraagt"

    - name: "AANGEVRAAGDE_CATEGORIE"
      description: "Aangevraagde horecacategorie (licht, middelzwaar, zwaar)"
      type: "string"
      required: false
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28b"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "De horecacategorie bepaalt welke activiteiten zijn toegestaan en wordt getoetst aan het horecagebiedsplan"

    - name: "ACTIVITEITEN"
      description: "Lijst van aangevraagde activiteiten (eten, drinken, muziek, dansen, etc.)"
      type: "array"
      type_spec:
        item_type: "string"
      required: false
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "1"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "De activiteiten worden vermeld op de vergunning en bepalen mede de voorwaarden"

  sources:
    - name: "BSN_EXPLOITANT"
      description: "BSN van de exploitant (eigenaar van de onderneming)"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "inschrijvingen"
        field: "bsn_eigenaar"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Het BSN wordt opgezocht via de KVK-inschrijving voor toetsing van de exploitant aan de gestelde eisen"

    - name: "HEEFT_GELDIGE_VOG_EXPLOITANT"
      description: "Of de exploitant een geldige Verklaring Omtrent Gedrag (VOG) heeft overlegd"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "personen_vog"
        field: "heeft_geldige_vog"
        select_on:
          - name: "bsn"
            description: "BSN van de exploitant"
            type: "string"
            value: "$BSN_EXPLOITANT"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "De VOG-status wordt opgezocht in het gemeentelijk register"

    - name: "VERSTREKT_ALCOHOL"
      description: "Geeft aan of er alcoholhoudende dranken worden verstrekt"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "vestigingen"
        field: "schenkt_alcohol"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Alcoholwet"
        bwb_id: "BWBR0002458"
        article: "3"
        url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Paragraaf2_Artikel3"
        explanation: "Indien alcohol wordt verstrekt gelden aanvullende eisen aan leeftijd (21 jaar) en kennis van sociale hygiëne"


    # Horecagebiedsplan
    - name: "HORECAGEBIEDSPLAN"
      description: "Horecagebiedsplan voor het adres"
      type: "object"
      temporal:
        type: "period"
        period_type: "continuous"
      source_reference:
        table: "horecagebiedsplannen"
        fields: ["gebied", "toegestane_categorieen", "maximaal_aantal", "ontwikkelruimte"]
        select_on:
          - name: "adres"
            description: "Adres van de inrichting"
            type: "string"
            value: "$ADRES"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28b"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Artikel 2:28b bepaalt dat het college horecagebiedsplannen vaststelt waarin de ontwikkelingsrichting voor vergunningplichtige horeca wordt bepaald"

    - name: "CATEGORIE_TOEGESTAAN_IN_GEBIED"
      description: "Of de aangevraagde horecacategorie is toegestaan in het horecagebiedsplan"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "horecagebiedsplannen"
        field: "categorie_toegestaan"
        select_on:
          - name: "adres"
            description: "Adres van de inrichting"
            type: "string"
            value: "$ADRES"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28b"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Per horecagebied is bepaald welke categorieën horeca zijn toegestaan"

    # Vergunninggeschiedenis
    - name: "VERGUNNING_GESCHIEDENIS"
      description: "Eerdere vergunningen en handhavingsgeschiedenis op dit adres"
      type: "object"
      temporal:
        type: "period"
        period_type: "continuous"
      source_reference:
        table: "vergunningen_historie"
        fields: ["vergunning_type", "afgiftedatum", "intrekkingsdatum", "intrekkingsreden", "handhavingsacties"]
        select_on:
          - name: "adres"
            description: "Adres van de inrichting"
            type: "string"
            value: "$ADRES"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "5"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Eerdere vergunningen en handhavingsgeschiedenis kunnen relevant zijn bij de beoordeling van een nieuwe aanvraag"

    - name: "EERDER_INGETROKKEN_WEGENS_SLECHT_LEVENSGEDRAG"
      description: "Of eerder een vergunning is ingetrokken wegens slecht levensgedrag"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "vergunningen_historie"
        field: "ingetrokken_slecht_levensgedrag"
        select_on:
          - name: "bsn"
            description: "BSN van de exploitant"
            type: "string"
            value: "$BSN_EXPLOITANT"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "5"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Bij eerdere intrekking wegens slecht levensgedrag kan de vergunning worden geweigerd"

    # Beheerders/leidinggevenden
    - name: "BEHEERDERS"
      description: "Lijst van beheerders/leidinggevenden met hun gegevens"
      type: "array"
      type_spec:
        item_type: "object"
        item_properties:
          - name: "bsn"
            type: "string"
          - name: "heeft_vog"
            type: "boolean"
          - name: "leeftijd"
            type: "number"
          - name: "is_onder_curatele"
            type: "boolean"
          - name: "heeft_svh_diploma"
            type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "beheerders"
        fields: ["bsn", "heeft_vog", "leeftijd", "is_onder_curatele", "heeft_svh_diploma"]
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Aan alle beheerders/leidinggevenden worden dezelfde eisen gesteld als aan de exploitant"

    - name: "ALLE_BEHEERDERS_HEBBEN_VOG"
      description: "Of alle beheerders een geldige VOG hebben"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "beheerders"
        field: "alle_hebben_vog"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Alle beheerders moeten een geldige VOG overleggen"

    - name: "ALLE_BEHEERDERS_VOLDOEN_LEEFTIJDSEIS"
      description: "Of alle beheerders aan de leeftijdseis voldoen (18 of 21 bij alcohol)"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "beheerders"
        field: "alle_voldoen_leeftijd"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
          - name: "schenkt_alcohol"
            description: "Of alcohol wordt geschonken"
            type: "boolean"
            value: "$VERSTREKT_ALCOHOL"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Beheerders moeten minimaal 18 jaar zijn, of 21 jaar indien alcohol wordt verstrekt"

    - name: "GEEN_BEHEERDER_ONDER_CURATELE"
      description: "Of geen van de beheerders onder curatele staat"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "beheerders"
        field: "geen_onder_curatele"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Geen van de beheerders mag onder curatele staan"

    # SVH diploma (alleen bij alcohol)
    - name: "LEIDINGGEVENDE_HEEFT_SVH_DIPLOMA"
      description: "Of minimaal één leidinggevende een SVH diploma heeft (verplicht bij alcohol)"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "beheerders"
        field: "heeft_svh_diploma"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Alcoholwet"
        bwb_id: "BWBR0002458"
        article: "8"
        url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Hoofdstuk2_Artikel8"
        explanation: "Bij het verstrekken van alcoholhoudende dranken moet minimaal één leidinggevende beschikken over voldoende kennis en inzicht met betrekking tot sociale hygiëne"

    - name: "HEEFT_GOEDGEKEURDE_VERGUNNING"
      description: "Of er een goedgekeurde exploitatievergunning is voor deze onderneming"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "vergunningen"
        field: "heeft_exploitatievergunning"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Controleert of er een actieve exploitatievergunning is verleend voor deze onderneming"

    - name: "VERGUNDE_CATEGORIE"
      description: "De categorie waarvoor de exploitatievergunning is verleend"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "vergunningen"
        field: "categorie"
        select_on:
          - name: "kvk_nummer"
            description: "KVK-nummer van de onderneming"
            type: "string"
            value: "$KVK_NUMMER"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "De categorie horecabedrijf waarvoor de vergunning is verleend"

    - name: "OMGEVINGSPLAN_HORECA_TOEGESTAAN"
      description: "Of horeca is toegestaan volgens het omgevingsplan (via DSO toetsresultaat)"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      source_reference:
        table: "omgevingsplan_toetsingen"
        field: "horeca_toegestaan"
        select_on:
          - name: "adres"
            description: "Adres van de locatie"
            type: "string"
            value: "$ADRES"
      legal_basis:
        law: "Omgevingswet"
        bwb_id: "BWBR0037885"
        article: "5.1"
        url: "https://wetten.overheid.nl/BWBR0037885/2024-01-01#Hoofdstuk5_Afdeling5.1_Paragraaf5.1.1_Artikel5.1"
        explanation: "Het omgevingsplan bepaalt welke functies op een locatie zijn toegestaan"

  input:
    - name: "ADRES"
      description: "Adres van de openbare inrichting (uit Handelsregister)"
      type: "string"
      service_reference:
        service: "KVK"
        law: "handelsregisterwet/bedrijfsgegevens"
        field: "vestigingsadres"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      legal_basis:
        law: "Handelsregisterwet 2007"
        bwb_id: "BWBR0021777"
        article: "14"
        url: "https://wetten.overheid.nl/BWBR0021777/2024-01-01#Hoofdstuk3_Artikel14"
        explanation: "Het vestigingsadres wordt opgehaald uit het Handelsregister"

    - name: "BEDRIJF_STATUS"
      description: "Status van de onderneming in het handelsregister"
      type: "string"
      service_reference:
        service: "KVK"
        law: "handelsregisterwet/bedrijfsgegevens"
        field: "status"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      legal_basis:
        law: "Handelsregisterwet 2007"
        bwb_id: "BWBR0021777"
        article: "2"
        url: "https://wetten.overheid.nl/BWBR0021777/2024-01-01#Artikel2"
        explanation: "De onderneming moet actief geregistreerd zijn in het handelsregister om een exploitatievergunning te kunnen aanvragen"

    - name: "LEEFTIJD_EXPLOITANT"
      description: "Leeftijd van de exploitant"
      type: "number"
      service_reference:
        service: "RvIG"
        law: "wet_brp"
        field: "leeftijd"
        parameters:
          - name: "BSN"
            reference: "$BSN_EXPLOITANT"
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "4"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Artikel 2:28 lid 4 bepaalt dat de exploitant minimaal 18 jaar oud moet zijn, of 21 jaar indien alcohol wordt verstrekt"

    - name: "IS_ONDER_CURATELE_EXPLOITANT"
      description: "Of de exploitant onder curatele staat"
      type: "boolean"
      service_reference:
        service: "RECHTSPRAAK"
        law: "burgerlijk_wetboek_handelingsonbekwaamheid"
        field: "is_onder_curatele"
        parameters:
          - name: "BSN"
            reference: "$BSN_EXPLOITANT"
      legal_basis:
        law: "Burgerlijk Wetboek Boek 1"
        bwb_id: "BWBR0002656"
        article: "378"
        url: "https://wetten.overheid.nl/BWBR0002656/2024-01-01#Boek1_Titeldeel19_Artikel378"
        explanation: "Artikel 2:28 lid 4 APV bepaalt dat de exploitant niet onder curatele mag staan. Dit wordt geverifieerd via het CCBR bij Rechtspraak"

    - name: "BAG_GEBRUIKSDOEL"
      description: "Gebruiksdoel van het pand volgens de BAG"
      type: "string"
      service_reference:
        service: "KADASTER"
        law: "wet_bag"
        field: "gebruiksdoel"
        parameters:
          - name: "ADRES"
            reference: "$ADRES"
      legal_basis:
        law: "Wet basisregistratie adressen en gebouwen"
        bwb_id: "BWBR0023466"
        article: "6"
        url: "https://wetten.overheid.nl/BWBR0023466/2022-01-01#Hoofdstuk2_Artikel6"
        explanation: "Het gebruiksdoel uit de BAG wordt getoetst voor de exploitatievergunning"

    # Bibob-toets (via Landelijk Bureau Bibob)
    - name: "BIBOB_ADVIES_UITGEBRACHT"
      description: "Of er een Bibob-advies is uitgebracht door het LBB"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      service_reference:
        service: "LBB"
        law: "wet_bibob"
        field: "advies_uitgebracht"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
          - name: "BESCHIKKING_TYPE"
            reference: "$BIBOB_BESCHIKKING_TYPE"
      legal_basis:
        law: "Wet bevordering integriteitsbeoordelingen door het openbaar bestuur"
        bwb_id: "BWBR0013798"
        article: "9"
        url: "https://wetten.overheid.nl/BWBR0013798/2024-01-01#Paragraaf3_Artikel9"
        explanation: "Het LBB brengt advies uit over de mate van gevaar voor misbruik van de vergunning"

    - name: "BIBOB_MATE_VAN_GEVAAR"
      description: "Mate van gevaar volgens Bibob-advies (geen_gevaar, mindere_mate, ernstig_gevaar)"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      service_reference:
        service: "LBB"
        law: "wet_bibob"
        field: "mate_van_gevaar"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
          - name: "BESCHIKKING_TYPE"
            reference: "$BIBOB_BESCHIKKING_TYPE"
      legal_basis:
        law: "Wet bevordering integriteitsbeoordelingen door het openbaar bestuur"
        bwb_id: "BWBR0013798"
        article: "3"
        url: "https://wetten.overheid.nl/BWBR0013798/2024-01-01#Paragraaf2_Artikel3"
        explanation: "Bij ernstig gevaar kan de vergunning worden geweigerd, bij mindere mate kunnen voorschriften worden gesteld"

  output:
    - name: "heeft_recht_op_vergunning"
      description: "Voldoet aan alle voorwaarden voor exploitatievergunning"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: primary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Het recht op een exploitatievergunning wordt bepaald volgens artikel 2:28 APV Rotterdam 2012"

    - name: "heeft_actieve_vergunning"
      description: "Of de onderneming een actieve (goedgekeurde) exploitatievergunning heeft"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: primary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Geeft aan of er een actieve exploitatievergunning is verleend voor deze onderneming"

    - name: "vergunde_categorie"
      description: "De categorie waarvoor de exploitatievergunning is verleend"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: primary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "1"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "De categorie horecabedrijf bepaalt welke voorwaarden van toepassing zijn"

    - name: "harde_weigeringsgrond"
      description: "Reden voor verplichte weigering van de vergunning (imperatief)"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: primary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "5"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Artikel 2:28 lid 5 bepaalt de gronden waarop de burgemeester de vergunning MOET weigeren"

    - name: "zachte_weigeringsgrond"
      description: "Reden voor mogelijke weigering van de vergunning (facultatief)"
      type: "string"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: primary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "6"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Artikel 2:28 lid 6 bepaalt de gronden waarop de burgemeester de vergunning KAN weigeren"

    - name: "vergunningsduur"
      description: "Duur van de vergunning in jaren"
      type: "number"
      temporal:
        type: "period"
        period_type: "continuous"
      citizen_relevance: secondary
      legal_basis:
        law: "Algemene plaatselijke verordening Rotterdam 2012"
        article: "2:28"
        paragraph: "2"
        url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
        explanation: "Artikel 2:28 lid 2 bepaalt dat de vergunning wordt verleend voor vijf jaar, tenzij anders bepaald"

    - name: "verstrekt_alcoholhoudende_dranken"
      description: "Of de onderneming alcoholhoudende dranken verstrekt"
      type: "boolean"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      citizen_relevance: secondary
      legal_basis:
        law: "Alcoholwet"
        bwb_id: "BWBR0002458"
        article: "3"
        url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Paragraaf2_Artikel3"
        explanation: "Geeft aan of de onderneming alcoholhoudende dranken verstrekt"

  definitions:
    MINIMALE_LEEFTIJD_ZONDER_ALCOHOL: 18
    MINIMALE_LEEFTIJD_MET_ALCOHOL: 21
    STANDAARD_VERGUNNINGSDUUR: 5  # jaren
    TOEGESTANE_GEBRUIKSDOELEN:
      - "bijeenkomstfunctie"
      - "celfunctie"
      - "winkelfunctie"
      - "overige gebruiksfunctie"
    BIBOB_ERNSTIG_GEVAAR: "ernstig_gevaar"
    BIBOB_MINDERE_MATE: "mindere_mate"
    BIBOB_BESCHIKKING_TYPE: "vergunning"
    BIBOB_GEEN_GEVAAR: "geen_gevaar"

requirements:
  # HARDE WEIGERINGSGRONDEN (MOET weigeren - art. 2:28 lid 5)
  - all:
      # Onderneming moet actief zijn
      - subject: "$BEDRIJF_STATUS"
        operation: EQUALS
        value: "Actief"
        legal_basis:
          law: "Handelsregisterwet 2007"
          bwb_id: "BWBR0021777"
          article: "2"
          url: "https://wetten.overheid.nl/BWBR0021777/2024-01-01#Artikel2"
          explanation: "De onderneming moet actief geregistreerd zijn"

      # Exploitant leeftijdseis afhankelijk van alcohol
      - or:
          - all:
              - subject: "$VERSTREKT_ALCOHOL"
                operation: EQUALS
                value: false
              - operation: GREATER_OR_EQUAL
                values:
                  - "$LEEFTIJD_EXPLOITANT"
                  - "$MINIMALE_LEEFTIJD_ZONDER_ALCOHOL"
          - all:
              - subject: "$VERSTREKT_ALCOHOL"
                operation: EQUALS
                value: true
              - operation: GREATER_OR_EQUAL
                values:
                  - "$LEEFTIJD_EXPLOITANT"
                  - "$MINIMALE_LEEFTIJD_MET_ALCOHOL"
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Exploitant moet minimaal 18 jaar zijn, of 21 bij alcoholverstrekking"

      # Exploitant VOG
      - subject: "$HEEFT_GELDIGE_VOG_EXPLOITANT"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Exploitant moet een geldige VOG overleggen"

      # Exploitant niet onder curatele
      - subject: "$IS_ONDER_CURATELE_EXPLOITANT"
        operation: EQUALS
        value: false
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Exploitant mag niet onder curatele staan"

      # Beheerders VOG
      - subject: "$ALLE_BEHEERDERS_HEBBEN_VOG"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Alle beheerders moeten een geldige VOG overleggen"

      # Beheerders leeftijd
      - subject: "$ALLE_BEHEERDERS_VOLDOEN_LEEFTIJDSEIS"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Beheerders moeten aan leeftijdseis voldoen"

      # Beheerders niet onder curatele
      - subject: "$GEEN_BEHEERDER_ONDER_CURATELE"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "4"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Geen beheerder mag onder curatele staan"

      # SVH diploma bij alcohol
      - or:
          - subject: "$VERSTREKT_ALCOHOL"
            operation: EQUALS
            value: false
          - subject: "$LEIDINGGEVENDE_HEEFT_SVH_DIPLOMA"
            operation: EQUALS
            value: true
        legal_basis:
          law: "Alcoholwet"
          bwb_id: "BWBR0002458"
          article: "8"
          url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Hoofdstuk2_Artikel8"
          explanation: "Bij alcoholverstrekking moet minimaal één leidinggevende SVH diploma hebben"

      # Bibob: geen ernstig gevaar
      - or:
          - subject: "$BIBOB_ADVIES_UITGEBRACHT"
            operation: EQUALS
            value: false
          - subject: "$BIBOB_MATE_VAN_GEVAAR"
            operation: NOT_EQUALS
            value: "$BIBOB_ERNSTIG_GEVAAR"
        legal_basis:
          law: "Wet bevordering integriteitsbeoordelingen door het openbaar bestuur"
          bwb_id: "BWBR0013798"
          article: "3"
          url: "https://wetten.overheid.nl/BWBR0013798/2024-01-01#Paragraaf2_Artikel3"
          explanation: "Bij ernstig gevaar volgens Bibob moet de vergunning worden geweigerd"

      # Niet eerder ingetrokken wegens slecht levensgedrag
      - subject: "$EERDER_INGETROKKEN_WEGENS_SLECHT_LEVENSGEDRAG"
        operation: EQUALS
        value: false
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28"
          paragraph: "5"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "Bij eerdere intrekking wegens slecht levensgedrag moet worden geweigerd"

      # BAG gebruiksdoel toegestaan
      - operation: IN
        subject: "$BAG_GEBRUIKSDOEL"
        values: "$TOEGESTANE_GEBRUIKSDOELEN"
        legal_basis:
          law: "Wet basisregistratie adressen en gebouwen"
          bwb_id: "BWBR0023466"
          article: "6"
          url: "https://wetten.overheid.nl/BWBR0023466/2022-01-01#Hoofdstuk2_Artikel6"
          explanation: "Gebruiksdoel moet geschikt zijn voor horeca"

      # Horecagebiedsplan: categorie toegestaan
      - subject: "$CATEGORIE_TOEGESTAAN_IN_GEBIED"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Algemene plaatselijke verordening Rotterdam 2012"
          article: "2:28b"
          url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
          explanation: "De horecacategorie moet zijn toegestaan in het horecagebiedsplan"

      # Omgevingsplan: horeca toegestaan
      - subject: "$OMGEVINGSPLAN_HORECA_TOEGESTAAN"
        operation: EQUALS
        value: true
        legal_basis:
          law: "Omgevingswet"
          bwb_id: "BWBR0037885"
          article: "5.1"
          url: "https://wetten.overheid.nl/BWBR0037885/2024-01-01#Hoofdstuk5_Afdeling5.1_Paragraaf5.1.1_Artikel5.1"
          explanation: "Horeca moet zijn toegestaan volgens het omgevingsplan"

actions:
  - output: "heeft_recht_op_vergunning"
    value: true
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "Aan alle vereisten is voldaan"

  - output: "heeft_actieve_vergunning"
    value: "$HEEFT_GOEDGEKEURDE_VERGUNNING"
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "Geeft de status van de actieve exploitatievergunning door vanuit het vergunningenregister"

  - output: "vergunde_categorie"
    value: "$VERGUNDE_CATEGORIE"
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "De categorie horecabedrijf waarvoor de vergunning is verleend"

  - output: "harde_weigeringsgrond"
    operation: IF
    conditions:
      - test:
          subject: "$BEDRIJF_STATUS"
          operation: NOT_EQUALS
          value: "Actief"
        then: "Onderneming is niet actief in het handelsregister"
      - test:
          operation: AND
          values:
            - subject: "$VERSTREKT_ALCOHOL"
              operation: EQUALS
              value: false
            - operation: LESS_THAN
              values:
                - "$LEEFTIJD_EXPLOITANT"
                - "$MINIMALE_LEEFTIJD_ZONDER_ALCOHOL"
        then: "Exploitant is jonger dan 18 jaar"
      - test:
          operation: AND
          values:
            - subject: "$VERSTREKT_ALCOHOL"
              operation: EQUALS
              value: true
            - operation: LESS_THAN
              values:
                - "$LEEFTIJD_EXPLOITANT"
                - "$MINIMALE_LEEFTIJD_MET_ALCOHOL"
        then: "Exploitant is jonger dan 21 jaar (vereist bij alcoholverstrekking)"
      - test:
          subject: "$HEEFT_GELDIGE_VOG_EXPLOITANT"
          operation: EQUALS
          value: false
        then: "Exploitant heeft geen geldige VOG overlegd"
      - test:
          subject: "$IS_ONDER_CURATELE_EXPLOITANT"
          operation: EQUALS
          value: true
        then: "Exploitant staat onder curatele"
      - test:
          subject: "$ALLE_BEHEERDERS_HEBBEN_VOG"
          operation: EQUALS
          value: false
        then: "Niet alle beheerders hebben een geldige VOG"
      - test:
          subject: "$ALLE_BEHEERDERS_VOLDOEN_LEEFTIJDSEIS"
          operation: EQUALS
          value: false
        then: "Niet alle beheerders voldoen aan de leeftijdseis"
      - test:
          subject: "$GEEN_BEHEERDER_ONDER_CURATELE"
          operation: EQUALS
          value: false
        then: "Een of meer beheerders staan onder curatele"
      - test:
          operation: AND
          values:
            - subject: "$VERSTREKT_ALCOHOL"
              operation: EQUALS
              value: true
            - subject: "$LEIDINGGEVENDE_HEEFT_SVH_DIPLOMA"
              operation: EQUALS
              value: false
        then: "Geen leidinggevende met SVH diploma (vereist bij alcoholverstrekking)"
      - test:
          operation: AND
          values:
            - subject: "$BIBOB_ADVIES_UITGEBRACHT"
              operation: EQUALS
              value: true
            - subject: "$BIBOB_MATE_VAN_GEVAAR"
              operation: EQUALS
              value: "$BIBOB_ERNSTIG_GEVAAR"
        then: "Ernstig gevaar volgens Bibob-advies"
      - test:
          subject: "$EERDER_INGETROKKEN_WEGENS_SLECHT_LEVENSGEDRAG"
          operation: EQUALS
          value: true
        then: "Eerder ingetrokken vergunning wegens slecht levensgedrag"
      - test:
          subject: "$BAG_GEBRUIKSDOEL"
          operation: NOT_IN
          values: "$TOEGESTANE_GEBRUIKSDOELEN"
        then: "Pand heeft geen geschikt gebruiksdoel voor horeca"
      - test:
          subject: "$CATEGORIE_TOEGESTAAN_IN_GEBIED"
          operation: EQUALS
          value: false
        then: "Horecacategorie niet toegestaan in horecagebiedsplan"
      - test:
          subject: "$OMGEVINGSPLAN_HORECA_TOEGESTAAN"
          operation: EQUALS
          value: false
        then: "Horeca niet toegestaan volgens omgevingsplan"
      - else: ""
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      paragraph: "5"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "Imperatieve weigeringsgronden"

  - output: "zachte_weigeringsgrond"
    operation: IF
    conditions:
      - test:
          operation: AND
          values:
            - subject: "$BIBOB_ADVIES_UITGEBRACHT"
              operation: EQUALS
              value: true
            - subject: "$BIBOB_MATE_VAN_GEVAAR"
              operation: EQUALS
              value: "$BIBOB_MINDERE_MATE"
        then: "Mindere mate van gevaar volgens Bibob-advies (voorschriften mogelijk)"
      - else: ""
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      paragraph: "6"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "Facultatieve weigeringsgronden"

  - output: "vergunningsduur"
    value: "$STANDAARD_VERGUNNINGSDUUR"
    legal_basis:
      law: "Algemene plaatselijke verordening Rotterdam 2012"
      article: "2:28"
      paragraph: "2"
      url: "https://lokaleregelgeving.overheid.nl/CVDR373493/11"
      explanation: "Standaard vergunningsduur is 5 jaar"

  - output: "verstrekt_alcoholhoudende_dranken"
    value: "$VERSTREKT_ALCOHOL"
    legal_basis:
      law: "Alcoholwet"
      bwb_id: "BWBR0002458"
      article: "3"
      url: "https://wetten.overheid.nl/BWBR0002458/2025-02-12#Paragraaf2_Artikel3"
      explanation: "Geeft door of de onderneming alcoholhoudende dranken verstrekt"

  - output: "bibob_voorschriften_vereist"
    operation: AND
    values:
      - subject: "$BIBOB_ADVIES_UITGEBRACHT"
        operation: EQUALS
        value: true
      - subject: "$BIBOB_MATE_VAN_GEVAAR"
        operation: EQUALS
        value: "$BIBOB_MINDERE_MATE"
    legal_basis:
      law: "Wet bevordering integriteitsbeoordelingen door het openbaar bestuur"
      bwb_id: "BWBR0013798"
      article: "3"
      paragraph: "7"
      url: "https://wetten.overheid.nl/BWBR0013798/2024-01-01#Paragraaf2_Artikel3"
      explanation: "Bij mindere mate van gevaar worden voorschriften aan de vergunning verbonden"
