$id: https://raw.githubusercontent.com/MinBZK/poc-machine-law/refs/heads/main/schema/v0.1.6/schema.json
uuid: 8a2b6c4e-3f1d-4a5b-9e2c-7f8d1a4b6c9e
name: WPM Rapportageverplichting
law: wpm
law_type: "FORMELE_WET"
legal_character: "BESCHIKKING"
decision_type: "TOEKENNING"
discoverable: "BUSINESS"
valid_from: 2024-07-01
service: "RVO"
description: >
  Rapportageverplichting Werkgebonden Personenmobiliteit (WPM) volgens het Besluit CO2-reductie
  werkgebonden personenmobiliteit. Organisaties met 100 of meer werknemers moeten rapporteren
  over CO2-uitstoot van zakelijk verkeer en woon-werkverkeer.

legal_basis:
  law: "Besluit activiteiten leefomgeving"
  bwb_id: "BWBR0041330"
  article: "15.38a"
  url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
  juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&z=2024-07-01&g=2024-07-01"
  explanation: "Artikel 15.38a bepaalt de rapportageverplichting voor werkgebonden personenmobiliteit voor organisaties met 100 of meer werknemers"

references:
  - law: "Besluit activiteiten leefomgeving"
    article: "15.38a"
    url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
  - law: "Besluit activiteiten leefomgeving"
    article: "15.38b"
    url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38b"
  - law: "Besluit activiteiten leefomgeving"
    article: "15.38c"
    url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"

requirements:
  - all:
      - operation: IN
        subject: "$ORGANISATIE_STATUS"
        values: "$ACTIEVE_STATUSSEN"
        legal_basis:
          law: "Besluit activiteiten leefomgeving"
          bwb_id: "BWBR0041330"
          article: "15.38a"
          url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
          juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&z=2024-07-01&g=2024-07-01"
          explanation: "Alleen actieve organisaties vallen onder de WPM-regelgeving"

properties:
  parameters:
    - name: "KVK_NUMMER"
      description: "KvK nummer van de organisatie"
      type: "string"
      required: true
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38a"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38a lid 1 bepaalt dat de rapportageverplichting geldt voor organisaties ingeschreven in het Handelsregister"

  input:
    - name: "AANTAL_WERKNEMERS"
      description: "Aantal werknemers op de peildatum"
      type: "number"
      service_reference:
        service: "KVK"
        field: "aantal_werknemers"
        law: "handelsregisterwet/bedrijfsgegevens"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38a"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38a lid 1 bepaalt de drempel van 100 werknemers voor rapportageverplichting"

    - name: "ORGANISATIE_STATUS"
      description: "Status van de organisatie in het handelsregister"
      type: "string"
      service_reference:
        service: "KVK"
        field: "status"
        law: "handelsregisterwet/bedrijfsgegevens"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "point_in_time"
        reference: "$calculation_date"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38a"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
        explanation: "Alleen actieve organisaties vallen onder de rapportageverplichting"

    - name: "WOON_WERK_AUTO_BENZINE"
      description: "Kilometers woon-werkverkeer met auto op benzine"
      type: "number"
      required: false
      service_reference:
        service: "RVO"
        field: "woon_werk_auto_benzine"
        law: "wpm/data"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "period"
        period_type: "year"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt de te rapporteren gegevens per vervoermiddel en brandstoftype"

    - name: "WOON_WERK_AUTO_DIESEL"
      description: "Kilometers woon-werkverkeer met auto op diesel"
      type: "number"
      required: false
      service_reference:
        service: "RVO"
        field: "woon_werk_auto_diesel"
        law: "wpm/data"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "period"
        period_type: "year"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt de te rapporteren gegevens per vervoermiddel en brandstoftype"

    - name: "ZAKELIJK_AUTO_BENZINE"
      description: "Kilometers zakelijk verkeer met auto op benzine"
      type: "number"
      required: false
      service_reference:
        service: "RVO"
        field: "zakelijk_auto_benzine"
        law: "wpm/data"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "period"
        period_type: "year"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt de te rapporteren gegevens per vervoermiddel en brandstoftype"

    - name: "ZAKELIJK_AUTO_DIESEL"
      description: "Kilometers zakelijk verkeer met auto op diesel"
      type: "number"
      required: false
      service_reference:
        service: "RVO"
        field: "zakelijk_auto_diesel"
        law: "wpm/data"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "period"
        period_type: "year"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt de te rapporteren gegevens per vervoermiddel en brandstoftype"

    - name: "WOON_WERK_OV"
      description: "Kilometers woon-werkverkeer met openbaar vervoer"
      type: "number"
      required: false
      service_reference:
        service: "RVO"
        field: "woon_werk_ov"
        law: "wpm/data"
        parameters:
          - name: "KVK_NUMMER"
            reference: "$KVK_NUMMER"
      temporal:
        type: "period"
        period_type: "year"
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt de te rapporteren gegevens per vervoermiddel en brandstoftype"

  output:
    - name: "rapportageverplichting"
      description: "Of de organisatie verplicht is te rapporteren"
      type: "boolean"
      citizen_relevance: primary
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38a"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38a lid 1 bepaalt dat organisaties met 100 of meer werknemers verplicht zijn te rapporteren"

    - name: "aantal_werknemers"
      description: "Aantal werknemers op de peildatum"
      type: "number"
      citizen_relevance: secondary
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38a"
        paragraph: "1"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
        explanation: "Het aantal werknemers bepaalt of de rapportageverplichting van toepassing is"

    - name: "rapportage_deadline"
      description: "Deadline voor het indienen van de rapportage"
      type: "date"
      citizen_relevance: primary
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38b"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38b"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38b&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38b bepaalt de rapportagedeadline van 30 juni"

    - name: "co2_uitstoot_totaal"
      description: "Totale berekende CO2-uitstoot in gram"
      type: "number"
      citizen_relevance: primary
      legal_basis:
        law: "Besluit activiteiten leefomgeving"
        bwb_id: "BWBR0041330"
        article: "15.38c"
        url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
        juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
        explanation: "Artikel 15.38c bepaalt dat CO2-uitstoot moet worden berekend op basis van kilometrage per vervoermiddel"

  definitions:
    ACTIEVE_STATUSSEN:
      - "ACTIEF"
      - "TIJDELIJK_GESTAAKT"

    CO2_FACTOREN:
      AUTO_BENZINE: 170  # gram CO2 per kilometer
      AUTO_DIESEL: 150   # gram CO2 per kilometer
      OV: 30            # gram CO2 per kilometer

    WERKNEMERS_DREMPEL: 100
    RAPPORTAGE_MAAND: 6  # juni
    RAPPORTAGE_DAG: 30

variables:
  - name: "peildatum"
    description: "Peildatum voor het bepalen van het aantal werknemers"
    value:
      operation: CONDITIONAL
      condition:
        operation: DATE_BEFORE
        subject: "$calculation_date"
        value: "2025-01-01"
      then: "2024-07-01"  # Voor eerste rapportage
      else:
        operation: DATE_CREATE
        year:
          operation: SUBTRACT
          subject:
            operation: YEAR
            subject: "$calculation_date"
          value: 1
        month: 1
        day: 1

  - name: "rapportage_jaar"
    description: "Jaar waarin gerapporteerd moet worden"
    value:
      operation: CONDITIONAL
      condition:
        operation: DATE_BEFORE
        subject: "$calculation_date"
        value: "2025-01-01"
      then: 2025  # Voor eerste rapportage
      else:
        operation: ADD
        subject:
          operation: YEAR
          subject: "$calculation_date"
        value: 1

actions:
  - output: "aantal_werknemers"
    value: "$AANTAL_WERKNEMERS"

  - output: "rapportageverplichting"
    operation: AND
    values:
      - operation: IN
        subject: "$ORGANISATIE_STATUS"
        values: "$ACTIEVE_STATUSSEN"
        legal_basis:
          law: "Besluit activiteiten leefomgeving"
          bwb_id: "BWBR0041330"
          article: "15.38a"
          url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
          juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&z=2024-07-01&g=2024-07-01"
          explanation: "Alleen actieve organisaties vallen onder de rapportageverplichting"
      - operation: GREATER_OR_EQUAL
        subject: "$AANTAL_WERKNEMERS"
        value: "$WERKNEMERS_DREMPEL"
        legal_basis:
          law: "Besluit activiteiten leefomgeving"
          bwb_id: "BWBR0041330"
          article: "15.38a"
          paragraph: "1"
          url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38a"
          juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38a&lid=1&z=2024-07-01&g=2024-07-01"
          explanation: "Artikel 15.38a lid 1 bepaalt de drempel van 100 werknemers"

  - output: "rapportage_deadline"
    value: "2025-06-30"
    legal_basis:
      law: "Besluit activiteiten leefomgeving"
      bwb_id: "BWBR0041330"
      article: "15.38b"
      url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38b"
      juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38b&z=2024-07-01&g=2024-07-01"
      explanation: "Artikel 15.38b bepaalt de rapportagedeadline van 30 juni"

  - output: "co2_uitstoot_totaal"
    value: 0
    legal_basis:
      law: "Besluit activiteiten leefomgeving"
      bwb_id: "BWBR0041330"
      article: "15.38c"
      url: "https://wetten.overheid.nl/BWBR0041330/2024-07-01#Hoofdstuk15_Paragraaf15.7_Artikel15.38c"
      juriconnect: "jci1.3:c:BWBR0041330&artikel=15.38c&z=2024-07-01&g=2024-07-01"
      explanation: "Artikel 15.38c bepaalt dat CO2-uitstoot wordt berekend per vervoermiddel en brandstoftype"
